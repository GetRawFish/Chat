(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db95179"],{"293a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat container"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-contact-bg"}),a("div",{staticClass:"header-contact"},[a("router-link",{staticClass:"header-contact-go-back",attrs:{to:{name:"list"}}},[a("i",{staticClass:"fas fa-chevron-left"})]),a("div",{staticClass:"header-contact-avatar"}),a("div",{staticClass:"header-contact-info"},[a("h2",{staticClass:"header-contact-name"},[e._v(e._s(e.receptorUsername))]),a("p",{staticClass:"header-contact-state"})])],1)]),a("div",{staticClass:"chat-chat",attrs:{id:"chatChat"}},e._l(e.mensajes,function(t){return a("div",{key:t.id},[a("p",{class:{"chat-received":t.fields.Receptor[0]==e.$route.params.receptor,"chat-sent":t.fields.Receptor[0]!=e.$route.params.receptor}},[e._v(e._s(t.fields.Text))])])}),0),a("div",{staticClass:"write"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.textoNuevoMensaje,expression:"textoNuevoMensaje"}],attrs:{type:"text"},domProps:{value:e.textoNuevoMensaje},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nuevoMensaje(t)},input:function(t){t.target.composing||(e.textoNuevoMensaje=t.target.value)}}}),a("button",{on:{click:function(t){return t.preventDefault(),e.nuevoMensaje(t)}}},[e._v("Enviar")])])])},n=[],o=(a("cadf"),a("551c"),a("f751"),a("097d"),{name:"chat",props:["emisor","receptor"],components:{},data:function(){return{loading:!0,emisorUsername:"",receptorUsername:"",mensajes:[],textoNuevoMensaje:"",tiempoRefresco:1e3}},mounted:function(){var e=this;axios.get("https://api.airtable.com/v0/appCswOBjla31jRfk/User/".concat(e.$route.params.emisor)).then(function(t){e.emisorUsername=t.data.fields.Username,e.cargarMensajes(),setInterval(e.cargarMensajes,e.tiempoRefresco)}).catch(function(e){console.log(e)}).then(function(){}),axios.get("https://api.airtable.com/v0/appCswOBjla31jRfk/User/".concat(e.$route.params.receptor)).then(function(t){e.receptorUsername=t.data.fields.Username,e.cargarMensajes(),setInterval(e.cargarMensajes,e.tiempoRefresco)}).catch(function(e){console.log(e)}).then(function(){})},methods:{cargarMensajes:function(){var e=this;axios.get('https://api.airtable.com/v0/appCswOBjla31jRfk/Message?view=Grid%20view&filterByFormula=OR(AND({Emisor}="'.concat(e.emisorUsername,'", {Receptor}="').concat(e.receptorUsername,'"), AND({Emisor}="').concat(e.receptorUsername,'", {Receptor}="').concat(e.emisorUsername,'"))')).then(function(t){t.data.records.length!=e.mensajes.length&&(e.mensajes=t.data.records)}).catch(function(e){console.log(e)}).then(function(){})},nuevoMensaje:function(){var e=this;axios.post("https://api.airtable.com/v0/appCswOBjla31jRfk/Message",{fields:{Text:e.textoNuevoMensaje,Emisor:[e.$route.params.emisor],Receptor:[e.$route.params.receptor]}}).then(function(t){e.cargarMensajes(),e.textoNuevoMensaje=""}).catch(function(e){console.log(e)}).then(function(){})}},updated:function(){$div.scrollTo(0,document.$("#chatChat").scrollHeight)}}),r=o,c=(a("bbe8"),a("2877")),i=Object(c["a"])(r,s,n,!1,null,"256dece6",null);t["default"]=i.exports},bbe8:function(e,t,a){"use strict";var s=a("c627"),n=a.n(s);n.a},c627:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4db95179.f4b73ed8.js.map