{"version":3,"sources":["webpack:///./src/views/Chat.vue?14bd","webpack:///src/views/Chat.vue","webpack:///./src/views/Chat.vue?880d","webpack:///./src/views/Chat.vue","webpack:///./src/views/Chat.vue?8d31"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","to","name","_v","_s","receptorUsername","id","_l","mensaje","key","class","chat-received","fields","Receptor","$route","params","receptor","chat-sent","Text","directives","rawName","value","expression","type","domProps","on","keyup","$event","indexOf","_k","keyCode","nuevoMensaje","input","target","composing","textoNuevoMensaje","click","preventDefault","staticRenderFns","Chatvue_type_script_lang_js_","props","components","data","loading","emisorUsername","mensajes","tiempoRefresco","mounted","that","axios","get","concat","emisor","then","response","Username","cargarMensajes","setInterval","catch","error","console","log","methods","records","length","post","Emisor","updated","$div","scrollTo","document","$","scrollHeight","views_Chatvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_style_index_0_id_256dece6_lang_postcss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_style_index_0_id_256dece6_lang_postcss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA6B,CAAAF,EAAA,OAAYE,YAAA,UAAqB,CAAAF,EAAA,OAAYE,YAAA,sBAAgCF,EAAA,OAAYE,YAAA,kBAA6B,CAAAF,EAAA,eAAoBE,YAAA,yBAAAC,MAAA,CAA4CC,GAAA,CAAMC,KAAA,UAAgB,CAAAL,EAAA,KAAUE,YAAA,0BAAkCF,EAAA,OAAcE,YAAA,0BAAoCF,EAAA,OAAYE,YAAA,uBAAkC,CAAAF,EAAA,MAAWE,YAAA,uBAAkC,CAAAN,EAAAU,GAAAV,EAAAW,GAAAX,EAAAY,qBAAAR,EAAA,KAAiDE,YAAA,4BAAmC,KAAAF,EAAA,OAAoBE,YAAA,YAAAC,MAAA,CAA+BM,GAAA,aAAiBb,EAAAc,GAAAd,EAAA,kBAAAe,GAAyC,OAAAX,EAAA,OAAiBY,IAAAD,EAAAF,IAAe,CAAAT,EAAA,KAAUa,MAAA,CAAOC,gBAAAH,EAAAI,OAAAC,SAAA,IAAApB,EAAAqB,OAAAC,OAAAC,SAAAC,YAAAT,EAAAI,OAAAC,SAAA,IAAApB,EAAAqB,OAAAC,OAAAC,WAAkJ,CAAAvB,EAAAU,GAAAV,EAAAW,GAAAI,EAAAI,OAAAM,aAA0C,GAAArB,EAAA,OAAeE,YAAA,SAAoB,CAAAF,EAAA,SAAcsB,WAAA,EAAajB,KAAA,QAAAkB,QAAA,UAAAC,MAAA5B,EAAA,kBAAA6B,WAAA,sBAA4FtB,MAAA,CAASuB,KAAA,QAAcC,SAAA,CAAWH,MAAA5B,EAAA,mBAAgCgC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAA,EAAAJ,KAAAK,QAAA,QAAAnC,EAAAoC,GAAAF,EAAAG,QAAA,WAAAH,EAAAlB,IAAA,SAAsF,KAAehB,EAAAsC,aAAAJ,IAAgCK,MAAA,SAAAL,GAA0BA,EAAAM,OAAAC,YAAsCzC,EAAA0C,kBAAAR,EAAAM,OAAAZ,WAA4CxB,EAAA,UAAe4B,GAAA,CAAIW,MAAA,SAAAT,GAAiD,OAAxBA,EAAAU,iBAAwB5C,EAAAsC,aAAAJ,MAAkC,CAAAlC,EAAAU,GAAA,iBAC3gDmC,EAAA,GC0BAC,2CAAA,CACArC,KAAA,OACAsC,MAAA,sBACAC,WAAA,GAEAC,KAAA,WACA,OACAC,SAAA,EACAC,eAAA,GACAvC,iBAAA,GACAwC,SAAA,GACAV,kBAAA,GACAW,eAAA,MAGAC,QAAA,WAEA,IAAAC,EAAAtD,KAEAuD,MAAAC,IAAA,sDAAAC,OAAAH,EAAAlC,OAAAC,OAAAqC,SACAC,KAAA,SAAAC,GACAN,EAAAJ,eAAAU,EAAAZ,KAAA9B,OAAA2C,SAEAP,EAAAQ,iBACAC,YAAAT,EAAAQ,eAAAR,EAAAF,kBAEAY,MAAA,SAAAC,GAEAC,QAAAC,IAAAF,KAEAN,KAAA,cAIAJ,MAAAC,IAAA,sDAAAC,OAAAH,EAAAlC,OAAAC,OAAAC,WACAqC,KAAA,SAAAC,GACAN,EAAA3C,iBAAAiD,EAAAZ,KAAA9B,OAAA2C,SAEAP,EAAAQ,iBACAC,YAAAT,EAAAQ,eAAAR,EAAAF,kBAEAY,MAAA,SAAAC,GAEAC,QAAAC,IAAAF,KAEAN,KAAA,eAKAS,QAAA,CACAN,eAAA,WACA,IAAAR,EAAAtD,KACAuD,MAAAC,IAAA,2GAAAC,OAAAH,EAAAJ,eAAA,mBAAAO,OAAAH,EAAA3C,iBAAA,sBAAA8C,OAAAH,EAAA3C,iBAAA,mBAAA8C,OAAAH,EAAAJ,eAAA,QACAS,KAAA,SAAAC,GACAA,EAAAZ,KAAAqB,QAAAC,QAAAhB,EAAAH,SAAAmB,SACAhB,EAAAH,SAAAS,EAAAZ,KAAAqB,WAGAL,MAAA,SAAAC,GAEAC,QAAAC,IAAAF,KAEAN,KAAA,eAIAtB,aAAA,WACA,IAAAiB,EAAAtD,KAEAuD,MAAAgB,KAAA,yDACArD,OAAA,CACAM,KAAA8B,EAAAb,kBACA+B,OAAA,CACAlB,EAAAlC,OAAAC,OAAAqC,QAEAvC,SAAA,CACAmC,EAAAlC,OAAAC,OAAAC,aAIAqC,KAAA,SAAAC,GACAN,EAAAQ,iBACAR,EAAAb,kBAAA,KAEAuB,MAAA,SAAAC,GAEAC,QAAAC,IAAAF,KAEAN,KAAA,gBAOAc,QAAA,WACAC,KAAAC,SAAA,EAAAC,SAAAC,EAAA,aAAAC,iBC5H8UC,EAAA,0BCQ9UC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAjF,EACA8C,GACF,EACA,KACA,WACA,MAIeuC,EAAA,WAAAH,6CCnBf,IAAAI,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAoeE,EAAG","file":"js/chunk-4db95179.f4b73ed8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat container\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"header-contact-bg\"}),_c('div',{staticClass:\"header-contact\"},[_c('router-link',{staticClass:\"header-contact-go-back\",attrs:{\"to\":{ name: 'list'}}},[_c('i',{staticClass:\"fas fa-chevron-left\"})]),_c('div',{staticClass:\"header-contact-avatar\"}),_c('div',{staticClass:\"header-contact-info\"},[_c('h2',{staticClass:\"header-contact-name\"},[_vm._v(_vm._s(_vm.receptorUsername))]),_c('p',{staticClass:\"header-contact-state\"})])],1)]),_c('div',{staticClass:\"chat-chat\",attrs:{\"id\":\"chatChat\"}},_vm._l((_vm.mensajes),function(mensaje){return _c('div',{key:mensaje.id},[_c('p',{class:{'chat-received': mensaje.fields.Receptor[0] == _vm.$route.params.receptor, 'chat-sent': mensaje.fields.Receptor[0] != _vm.$route.params.receptor}},[_vm._v(_vm._s(mensaje.fields.Text))])])}),0),_c('div',{staticClass:\"write\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textoNuevoMensaje),expression:\"textoNuevoMensaje\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.textoNuevoMensaje)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.nuevoMensaje($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.textoNuevoMensaje=$event.target.value}}}),_c('button',{on:{\"click\":function($event){$event.preventDefault();return _vm.nuevoMensaje($event)}}},[_vm._v(\"Enviar\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"chat container\">\n        <!-- <router-link to=\"/\">Home</router-link> -->\n        <div class=\"header\">\n            <div class=\"header-contact-bg\"></div>\n            <div class=\"header-contact\">\n                <router-link :to=\"{ name: 'list'}\" class=\"header-contact-go-back\"><i class=\"fas fa-chevron-left\"></i></router-link>\n                <div class=\"header-contact-avatar\"></div>\n                <div class=\"header-contact-info\">\n                    <h2 class=\"header-contact-name\">{{ receptorUsername }}</h2>\n                    <p class=\"header-contact-state\"></p>\n                </div>\n            </div>\n        </div>\n        <div class=\"chat-chat\" id=\"chatChat\">\n            <div v-for=\"mensaje in mensajes\" :key=\"mensaje.id\">\n                <p :class=\"{'chat-received': mensaje.fields.Receptor[0] == $route.params.receptor, 'chat-sent': mensaje.fields.Receptor[0] != $route.params.receptor}\">{{ mensaje.fields.Text }}</p>\n            </div>\n        </div>\n        <div class=\"write\">\n            <input type=\"text\" v-model=\"textoNuevoMensaje\" @keyup.enter=\"nuevoMensaje\">\n            <button @click.prevent=\"nuevoMensaje\" >Enviar</button>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'chat',\n    props: ['emisor', 'receptor'],\n    components: {\n    },\n    data: function () {\n        return {\n            loading: true,\n            emisorUsername: '',\n            receptorUsername: '',\n            mensajes: [],\n            textoNuevoMensaje: '',\n            tiempoRefresco: 1000\n        }\n    },\n    mounted: function () {\n        // $route.params.id\n        let that = this;\n        // Obtenemos el nombre del emisor\n        axios.get(`https://api.airtable.com/v0/appCswOBjla31jRfk/User/${that.$route.params.emisor}`)\n        .then(function (response) {\n            that.emisorUsername = response.data.fields.Username;\n            // Con el resultado, obtenemos los mensajes del receptor y emisor\n            that.cargarMensajes();\n            setInterval(that.cargarMensajes, that.tiempoRefresco);\n        })\n        .catch(function (error) {\n            // handle error\n            console.log(error);\n        })\n        .then(function () {\n            // always executed\n        });\n        // Obtenemos el nombre del receptor\n        axios.get(`https://api.airtable.com/v0/appCswOBjla31jRfk/User/${that.$route.params.receptor}`)\n        .then(function (response) {\n            that.receptorUsername = response.data.fields.Username;\n            // Con el resultado, obtenemos los mensajes del receptor y emisor\n            that.cargarMensajes();\n            setInterval(that.cargarMensajes, that.tiempoRefresco);\n        })\n        .catch(function (error) {\n            // handle error\n            console.log(error);\n        })\n        .then(function () {\n            // always executed\n        });\n\n    },\n    methods: {\n        cargarMensajes: function () {\n            let that = this\n            axios.get(`https://api.airtable.com/v0/appCswOBjla31jRfk/Message?view=Grid%20view&filterByFormula=OR(AND({Emisor}=\"${that.emisorUsername}\", {Receptor}=\"${that.receptorUsername}\"), AND({Emisor}=\"${that.receptorUsername}\", {Receptor}=\"${that.emisorUsername}\"))`)\n                .then(function (response) {\n                    if (response.data.records.length != that.mensajes.length) {\n                        that.mensajes = response.data.records;\n                    }\n                })\n                .catch(function (error) {\n                    // handle error\n                    console.log(error);\n                })\n                .then(function () {\n                    // always executed\n                });\n        },\n        nuevoMensaje: function () {\n            let that = this\n            // Enviamos al API el nuevo mensaje\n            axios.post(`https://api.airtable.com/v0/appCswOBjla31jRfk/Message`, {\n                \"fields\": {\n                    \"Text\": that.textoNuevoMensaje,\n                    \"Emisor\": [\n                        that.$route.params.emisor\n                    ],\n                    \"Receptor\": [\n                        that.$route.params.receptor\n                    ]\n                }\n            })\n            .then(function (response) {\n                that.cargarMensajes();\n                that.textoNuevoMensaje = '';\n            })\n            .catch(function (error) {\n                // handle error\n                console.log(error);\n            })\n            .then(function () {\n                // always executed\n            });\n        // Refrescamos el mensaje\n\n        }\n    },\n    updated: function () {\n        $div.scrollTo(0, document.$('#chatChat').scrollHeight);\n    }\n}\n</script>\n<style lang=\"postcss\" scoped>\np {\n    margin: 0;\n}\n    .chat {\n        background-color: cadetblue;\n        height: 100vh;\n    }\n    .header {\n        height: 70px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        z-index: 100;\n    }\n    .header-contact-bg {\n        width: 100%;\n        height: 35px;\n        background-color: white;\n        position: relative;\n    }\n    .header-contact {\n        position: absolute; \n        height: 70px;\n        width: 100%;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n    }\n    .header-contact-avatar {\n        height: 60px;\n        width: 60px;\n        border-radius: 60px;\n        border: 6px solid gray;\n        background-color: cadetblue;\n    }\n    .chat-received {\n        color: red;\n    }\n    .chat-sent {\n        color: blue;\n    }\n    .write {\n        position: fixed;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background-color: coral;\n        height: 100px;\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n    }\n    .chat-chat {\n        z-index: 1;\n        overflow: auto;\n        height: calc(100% - 100px);\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=256dece6&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=256dece6&lang=postcss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"256dece6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=256dece6&lang=postcss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=256dece6&lang=postcss&scoped=true&\""],"sourceRoot":""}